<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Visualizer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apng-js@1.1.1/dist/apng-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Music Visualizer</h1>
        </header>
        
        <div class="control-panel">
            <div class="file-input-wrapper">
                <input type="file" id="audioFile" accept="audio/*" class="file-input">
                <label for="audioFile" class="file-label">음악 파일 선택</label>
            </div>
            
            <div class="controls">
                <button id="playBtn" class="btn" disabled>재생</button>
                <button id="pauseBtn" class="btn" disabled>일시정지</button>
                <button id="stopBtn" class="btn" disabled>정지</button>
            </div>
            
            <div class="recording-controls">
                <button id="downloadVideoBtn" class="btn download-btn" disabled>영상 다운로드</button>
                <button id="downloadTransparentBtn" class="btn transparent-btn" disabled>투명 영상 다운로드</button>
                <button id="downloadGifAnimBtn" class="btn gif-anim-btn" disabled>움직이는 GIF 다운로드</button>
                <div class="png-download-container">
                    <button id="downloadGifBtn" class="btn gif-btn" disabled>PNG 다운로드</button>
                    <select id="pngFormatSelect" class="png-format-select" disabled>
                        <option value="sequence">프레임 시퀀스 (ZIP)</option>
                        <option value="animated">움직이는 PNG (APNG)</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="settings-panel">
            <div class="settings-section">
                <h3>시각화 모드</h3>
                <div class="mode-selector">
                    <input type="radio" id="barMode" name="visualMode" value="bar" checked>
                    <label for="barMode" class="mode-label">바</label>
                    
                    <input type="radio" id="waveMode" name="visualMode" value="wave">
                    <label for="waveMode" class="mode-label">웨이브</label>
                    
                    <input type="radio" id="circleMode" name="visualMode" value="circle">
                    <label for="circleMode" class="mode-label">원형</label>
                    
                    <input type="radio" id="particleMode" name="visualMode" value="particle">
                    <label for="particleMode" class="mode-label">파티클</label>
                    
                    <input type="radio" id="spectrumMode" name="visualMode" value="spectrum">
                    <label for="spectrumMode" class="mode-label">스펙트럼</label>
                    
                    <input type="radio" id="spiralMode" name="visualMode" value="spiral">
                    <label for="spiralMode" class="mode-label">나선형</label>
                    
                    <input type="radio" id="mirrorMode" name="visualMode" value="mirror">
                    <label for="mirrorMode" class="mode-label">미러</label>
                    
                    <input type="radio" id="dnaMode" name="visualMode" value="dna">
                    <label for="dnaMode" class="mode-label">DNA</label>
                    
                    <input type="radio" id="flowerMode" name="visualMode" value="flower">
                    <label for="flowerMode" class="mode-label">꽃</label>
                    
                    <input type="radio" id="tunnelMode" name="visualMode" value="tunnel">
                    <label for="tunnelMode" class="mode-label">터널</label>
                    
                    <input type="radio" id="gridMode" name="visualMode" value="grid">
                    <label for="gridMode" class="mode-label">그리드</label>
                    
                    <input type="radio" id="starfieldMode" name="visualMode" value="starfield">
                    <label for="starfieldMode" class="mode-label">별</label>
                    
                    <input type="radio" id="kaleidoMode" name="visualMode" value="kaleido">
                    <label for="kaleidoMode" class="mode-label">만화경</label>
                    
                    <input type="radio" id="lightningMode" name="visualMode" value="lightning">
                    <label for="lightningMode" class="mode-label">번개</label>
                    
                    <input type="radio" id="rippleMode" name="visualMode" value="ripple">
                    <label for="rippleMode" class="mode-label">파동</label>
                    
                    <input type="radio" id="cubeMode" name="visualMode" value="cube">
                    <label for="cubeMode" class="mode-label">3D정육면체</label>
                    
                    <input type="radio" id="wormholeMode" name="visualMode" value="wormhole">
                    <label for="wormholeMode" class="mode-label">웜홀</label>
                    
                    <input type="radio" id="matrixRainMode" name="visualMode" value="matrixrain">
                    <label for="matrixRainMode" class="mode-label">매트릭스 비</label>
                    
                    <input type="radio" id="soundWaveMode" name="visualMode" value="soundwave">
                    <label for="soundWaveMode" class="mode-label">음파</label>
                    
                    <input type="radio" id="planetMode" name="visualMode" value="planet">
                    <label for="planetMode" class="mode-label">행성계</label>
                    
                    <input type="radio" id="neuralMode" name="visualMode" value="neural">
                    <label for="neuralMode" class="mode-label">신경망</label>
                    
                    <input type="radio" id="prismMode" name="visualMode" value="prism">
                    <label for="prismMode" class="mode-label">프리즘</label>
                    
                    <input type="radio" id="voronoiMode" name="visualMode" value="voronoi">
                    <label for="voronoiMode" class="mode-label">보로노이</label>
                    
                    <input type="radio" id="crystalMode" name="visualMode" value="crystal">
                    <label for="crystalMode" class="mode-label">크리스탈</label>
                    
                    <input type="radio" id="fluidMode" name="visualMode" value="fluid">
                    <label for="fluidMode" class="mode-label">유체</label>
                    
                    <input type="radio" id="galaxyMode" name="visualMode" value="galaxyspiral">
                    <label for="galaxyMode" class="mode-label">은하나선</label>
                    
                    <input type="radio" id="membraneMode" name="visualMode" value="membrane">
                    <label for="membraneMode" class="mode-label">막</label>
                    
                    <input type="radio" id="quantumMode" name="visualMode" value="quantum">
                    <label for="quantumMode" class="mode-label">양자장</label>
                    
                    <input type="radio" id="fractalsMode" name="visualMode" value="fractals">
                    <label for="fractalsMode" class="mode-label">프랙탈</label>
                    
                    <input type="radio" id="waveinterferenceMode" name="visualMode" value="waveinterference">
                    <label for="waveinterferenceMode" class="mode-label">파간섭</label>
                    
                    <input type="radio" id="fireworksMode" name="visualMode" value="fireworks">
                    <label for="fireworksMode" class="mode-label">불꽃놀이</label>
                    
                    <input type="radio" id="auroraMode" name="visualMode" value="aurora2">
                    <label for="auroraMode" class="mode-label">오로라2</label>
                    
                    <input type="radio" id="atomMode" name="visualMode" value="atom">
                    <label for="atomMode" class="mode-label">원자</label>
                    
                    <input type="radio" id="flockMode" name="visualMode" value="flock">
                    <label for="flockMode" class="mode-label">무리</label>
                    
                    <input type="radio" id="teslaMode" name="visualMode" value="tesla">
                    <label for="teslaMode" class="mode-label">테슬라</label>
                    
                    <input type="radio" id="hexagonMode" name="visualMode" value="hexagon">
                    <label for="hexagonMode" class="mode-label">육각형</label>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>색상 테마</h3>
                <div class="color-palette">
                    <div class="color-option active" data-theme="neon">네온</div>
                    <div class="color-option" data-theme="sunset">서니</div>
                    <div class="color-option" data-theme="ocean">바다</div>
                    <div class="color-option" data-theme="forest">숲</div>
                    <div class="color-option" data-theme="aurora">오로라</div>
                    <div class="color-option" data-theme="fire">불</div>
                    <div class="color-option" data-theme="cyber">사이버</div>
                    <div class="color-option" data-theme="galaxy">은하</div>
                    <div class="color-option" data-theme="rainbow">무지개</div>
                    <div class="color-option" data-theme="matrix">매트릭스</div>
                    <div class="color-option" data-theme="gold">금</div>
                    <div class="color-option" data-theme="ice">얼음</div>
                    <div class="color-option" data-theme="lava">용암</div>
                    <div class="color-option" data-theme="space">우주</div>
                    <div class="color-option" data-theme="tropical">열대</div>
                    <div class="color-option" data-theme="midnight">자정</div>
                    <div class="color-option" data-theme="emerald">에메랄드</div>
                    <div class="color-option" data-theme="ruby">루비</div>
                    <div class="color-option" data-theme="sapphire">사파이어</div>
                    <div class="color-option" data-theme="monochrome">흑백</div>
                    <div class="color-option" data-theme="vintage">빈티지</div>
                    <div class="color-option" data-theme="pastel">파스텔</div>
                    <div class="color-option" data-theme="neon2">네온2</div>
                    <div class="color-option" data-theme="toxic">독</div>
                    <div class="color-option" data-theme="crystal">크리스탈</div>
                    <div class="color-option" data-theme="cherry">체리</div>
                    <div class="color-option" data-theme="electric">전기</div>
                    <div class="color-option" data-theme="cosmic">코스믹</div>
                    <div class="color-option" data-theme="volcano">화산</div>
                    <div class="color-option" data-theme="dream">드림</div>
                    <div class="color-option" data-theme="neon3">네온3</div>
                    <div class="color-option" data-theme="gradient">그라디언트</div>
                    <div class="color-option" data-theme="royal">로얄</div>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>스타일 설정</h3>
                <div class="style-controls-inline">
                    <div class="control-inline">
                        <label for="lineWidth">선굵기</label>
                        <input type="range" id="lineWidth" min="1" max="10" value="2" class="slider-inline">
                        <span id="lineWidthValue">2</span>
                    </div>
                    
                    <div class="control-inline">
                        <label for="sensitivity">민감도</label>
                        <input type="range" id="sensitivity" min="0.5" max="3" step="0.1" value="1" class="slider-inline">
                        <span id="sensitivityValue">1.0</span>
                    </div>
                    
                    <div class="control-inline">
                        <label for="smoothing">부드러움</label>
                        <input type="range" id="smoothing" min="0" max="0.9" step="0.1" value="0.8" class="slider-inline">
                        <span id="smoothingValue">0.8</span>
                    </div>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>줌 컨트롤</h3>
                <div class="zoom-controls">
                    <div class="zoom-buttons">
                        <button id="zoomOutBtn" class="btn zoom-btn">-</button>
                        <button id="zoomInBtn" class="btn zoom-btn">+</button>
                        <button id="zoomResetBtn" class="btn zoom-btn">리셋</button>
                    </div>
                    <div class="zoom-slider-container">
                        <label for="zoomSlider">줌 레벨</label>
                        <input type="range" id="zoomSlider" min="10" max="1000" value="100" step="5" class="slider-inline">
                        <input type="number" id="zoomInput" min="10" max="1000" value="100" step="5" class="zoom-number-input">
                        <span>%</span>
                    </div>
                    <div class="zoom-hint">
                        마우스휠로 확대/축소, 드래그로 이동
                    </div>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>배경 설정</h3>
                <div class="background-controls">
                    <div class="background-presets">
                        <div class="background-option active" data-background="transparent">투명</div>
                        <div class="background-option" data-background="black">검정</div>
                        <div class="background-option" data-background="white">흰색</div>
                        <div class="background-option" data-background="green">초록(크로마키)</div>
                        <div class="background-option" data-background="custom">사용자설정</div>
                    </div>
                    <div class="custom-background-controls" style="display: none;">
                        <input type="color" id="customBackgroundColor" value="#000000">
                        <label for="customBackgroundColor">배경색 선택</label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="visualizer-container">
            <canvas id="visualizer" width="800" height="400"></canvas>
        </div>
        
        <div class="audio-controls">
            <audio id="audioPlayer" controls style="width: 100%;"></audio>
        </div>
        
        <div class="info-panel">
            <div class="status">상태: <span id="status">대기중</span></div>
            <div class="recording-status">녹화: <span id="recordingStatus">준비</span></div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>